<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historical Timeline</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Default: Cherry Red (Dark) */
            --bg-gradient-start: #620f19;
            --bg-gradient-end: #260500;
            --accent-color: #acacac;
            --text-primary: #ebebeb;
            --text-secondary: #bdbdbd;
            --card-bg: #000000;
            --nav-bg: rgba(98, 15, 25, 0.95);
            --timeline-line: rgba(255, 255, 255, 0.2);
        }

        /* Light Theme 1: Classic Light */
        [data-theme="light-classic"] {
            --bg-gradient-start: #f5f5f5;
            --bg-gradient-end: #e8e8e8;
            --accent-color: #4a90e2;
            --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a;
            --card-bg: #ffffff;
            --nav-bg: rgba(245, 245, 245, 0.95);
            --timeline-line: rgba(0, 0, 0, 0.15);
        }

        /* Light Theme 2: Soft Blue */
        [data-theme="light-blue"] {
            --bg-gradient-start: #e3f2fd;
            --bg-gradient-end: #bbdefb;
            --accent-color: #1976d2;
            --text-primary: #1565c0;
            --text-secondary: #424242;
            --card-bg: #ffffff;
            --nav-bg: rgba(227, 242, 253, 0.95);
            --timeline-line: rgba(25, 118, 210, 0.2);
        }

        /* Light Theme 3: Warm Beige */
        [data-theme="light-beige"] {
            --bg-gradient-start: #faf8f3;
            --bg-gradient-end: #f5f1e8;
            --accent-color: #8b6f47;
            --text-primary: #3e2723;
            --text-secondary: #5d4037;
            --card-bg: #ffffff;
            --nav-bg: rgba(250, 248, 243, 0.95);
            --timeline-line: rgba(139, 111, 71, 0.2);
        }

        /* Light Theme 4: Mint Green */
        [data-theme="light-mint"] {
            --bg-gradient-start: #e8f5e9;
            --bg-gradient-end: #c8e6c9;
            --accent-color: #2e7d32;
            --text-primary: #1b5e20;
            --text-secondary: #424242;
            --card-bg: #ffffff;
            --nav-bg: rgba(232, 245, 233, 0.95);
            --timeline-line: rgba(46, 125, 50, 0.2);
        }

        /* Light Theme 5: Lavender */
        [data-theme="light-lavender"] {
            --bg-gradient-start: #f3e5f5;
            --bg-gradient-end: #e1bee7;
            --accent-color: #7b1fa2;
            --text-primary: #4a148c;
            --text-secondary: #424242;
            --card-bg: #ffffff;
            --nav-bg: rgba(243, 229, 245, 0.95);
            --timeline-line: rgba(123, 31, 162, 0.2);
        }

        /* Light Theme 6: Peach */
        [data-theme="light-peach"] {
            --bg-gradient-start: #fff3e0;
            --bg-gradient-end: #ffe0b2;
            --accent-color: #e65100;
            --text-primary: #bf360c;
            --text-secondary: #5d4037;
            --card-bg: #ffffff;
            --nav-bg: rgba(255, 243, 224, 0.95);
            --timeline-line: rgba(230, 81, 0, 0.2);
        }

        /* Light Theme 7: Sky Blue */
        [data-theme="light-sky"] {
            --bg-gradient-start: #e0f7fa;
            --bg-gradient-end: #b2ebf2;
            --accent-color: #00838f;
            --text-primary: #006064;
            --text-secondary: #424242;
            --card-bg: #ffffff;
            --nav-bg: rgba(224, 247, 250, 0.95);
            --timeline-line: rgba(0, 131, 143, 0.2);
        }

        /* Light Theme 8: Rose */
        [data-theme="light-rose"] {
            --bg-gradient-start: #fce4ec;
            --bg-gradient-end: #f8bbd0;
            --accent-color: #c2185b;
            --text-primary: #880e4f;
            --text-secondary: #424242;
            --card-bg: #ffffff;
            --nav-bg: rgba(252, 228, 236, 0.95);
            --timeline-line: rgba(194, 24, 91, 0.2);
        }

        /* Dark Theme 1: Deep Blue */
        [data-theme="dark-blue"] {
            --bg-gradient-start: #0d1b2a;
            --bg-gradient-end: #1b263b;
            --accent-color: #4a9eff;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --card-bg: #0f1e2e;
            --nav-bg: rgba(13, 27, 42, 0.95);
            --timeline-line: rgba(74, 158, 255, 0.3);
        }

        /* Dark Theme 2: Forest Green */
        [data-theme="dark-green"] {
            --bg-gradient-start: #1a2e1a;
            --bg-gradient-end: #0d1f0d;
            --accent-color: #66bb6a;
            --text-primary: #e8f5e9;
            --text-secondary: #c8e6c9;
            --card-bg: #1a2e1a;
            --nav-bg: rgba(26, 46, 26, 0.95);
            --timeline-line: rgba(102, 187, 106, 0.3);
        }

        /* Dark Theme 3: Royal Purple */
        [data-theme="dark-purple"] {
            --bg-gradient-start: #2d1b4e;
            --bg-gradient-end: #1a0f2e;
            --accent-color: #ab47bc;
            --text-primary: #f3e5f5;
            --text-secondary: #e1bee7;
            --card-bg: #2d1b4e;
            --nav-bg: rgba(45, 27, 78, 0.95);
            --timeline-line: rgba(171, 71, 188, 0.3);
        }

        /* Dark Theme 4: Ocean Teal */
        [data-theme="dark-teal"] {
            --bg-gradient-start: #0d2b2b;
            --bg-gradient-end: #051a1a;
            --accent-color: #26a69a;
            --text-primary: #e0f2f1;
            --text-secondary: #b2dfdb;
            --card-bg: #0d2b2b;
            --nav-bg: rgba(13, 43, 43, 0.95);
            --timeline-line: rgba(38, 166, 154, 0.3);
        }

        /* Dark Theme 5: Burnt Orange */
        [data-theme="dark-orange"] {
            --bg-gradient-start: #3e2723;
            --bg-gradient-end: #1b0f0a;
            --accent-color: #ff7043;
            --text-primary: #fff3e0;
            --text-secondary: #ffe0b2;
            --card-bg: #3e2723;
            --nav-bg: rgba(62, 39, 35, 0.95);
            --timeline-line: rgba(255, 112, 67, 0.3);
        }

        /* Dark Theme 6: Charcoal Gray */
        [data-theme="dark-gray"] {
            --bg-gradient-start: #212121;
            --bg-gradient-end: #121212;
            --accent-color: #90caf9;
            --text-primary: #f5f5f5;
            --text-secondary: #bdbdbd;
            --card-bg: #1e1e1e;
            --nav-bg: rgba(33, 33, 33, 0.95);
            --timeline-line: rgba(144, 202, 249, 0.3);
        }

        /* Dark Theme 6 Variant: Black Cards with Dark Grey Background */
        [data-theme="dark-gray-black"] {
            --bg-gradient-start: #2d2d2d;
            --bg-gradient-end: #0f0f0f;
            --accent-color: #90caf9;
            --text-primary: #f5f5f5;
            --text-secondary: #bdbdbd;
            --card-bg: #000000;
            --nav-bg: rgba(45, 45, 45, 0.95);
            --timeline-line: rgba(144, 202, 249, 0.3);
        }

        /* Dark Theme 7: Midnight Blue */
        [data-theme="dark-midnight"] {
            --bg-gradient-start: #1a237e;
            --bg-gradient-end: #0d0f3d;
            --accent-color: #7986cb;
            --text-primary: #e8eaf6;
            --text-secondary: #c5cae9;
            --card-bg: #1a237e;
            --nav-bg: rgba(26, 35, 126, 0.95);
            --timeline-line: rgba(121, 134, 203, 0.3);
        }

        /* Mid Theme 1: Slate Blue */
        [data-theme="mid-blue"] {
            --bg-gradient-start: #546e7a;
            --bg-gradient-end: #37474f;
            --accent-color: #64b5f6;
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --card-bg: #455a64;
            --nav-bg: rgba(84, 110, 122, 0.95);
            --timeline-line: rgba(100, 181, 246, 0.4);
        }

        /* Mid Theme 2: Sage Green */
        [data-theme="mid-green"] {
            --bg-gradient-start: #558b2f;
            --bg-gradient-end: #33691e;
            --accent-color: #aed581;
            --text-primary: #ffffff;
            --text-secondary: #e8f5e9;
            --card-bg: #558b2f;
            --nav-bg: rgba(85, 139, 47, 0.95);
            --timeline-line: rgba(174, 213, 129, 0.4);
        }

        /* Mid Theme 3: Amethyst Purple */
        [data-theme="mid-purple"] {
            --bg-gradient-start: #6a1b9a;
            --bg-gradient-end: #4a148c;
            --accent-color: #ba68c8;
            --text-primary: #ffffff;
            --text-secondary: #f3e5f5;
            --card-bg: #6a1b9a;
            --nav-bg: rgba(106, 27, 154, 0.95);
            --timeline-line: rgba(186, 104, 200, 0.4);
        }

        /* Mid Theme 4: Earth Brown */
        [data-theme="mid-brown"] {
            --bg-gradient-start: #5d4037;
            --bg-gradient-end: #3e2723;
            --accent-color: #a1887f;
            --text-primary: #ffffff;
            --text-secondary: #fff3e0;
            --card-bg: #5d4037;
            --nav-bg: rgba(93, 64, 55, 0.95);
            --timeline-line: rgba(161, 136, 127, 0.4);
        }

        /* Mid Theme 5: Steel Gray */
        [data-theme="mid-gray"] {
            --bg-gradient-start: #616161;
            --bg-gradient-end: #424242;
            --accent-color: #90caf9;
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --card-bg: #525252;
            --nav-bg: rgba(97, 97, 97, 0.95);
            --timeline-line: rgba(144, 202, 249, 0.4);
        }

        /* Mid Theme 6: Teal */
        [data-theme="mid-teal"] {
            --bg-gradient-start: #00695c;
            --bg-gradient-end: #004d40;
            --accent-color: #4db6ac;
            --text-primary: #ffffff;
            --text-secondary: #e0f2f1;
            --card-bg: #00695c;
            --nav-bg: rgba(0, 105, 92, 0.95);
            --timeline-line: rgba(77, 182, 172, 0.4);
        }

        /* Mid Theme 7: Indigo */
        [data-theme="mid-indigo"] {
            --bg-gradient-start: #3949ab;
            --bg-gradient-end: #283593;
            --accent-color: #7986cb;
            --text-primary: #ffffff;
            --text-secondary: #e8eaf6;
            --card-bg: #3949ab;
            --nav-bg: rgba(57, 73, 171, 0.95);
            --timeline-line: rgba(121, 134, 203, 0.4);
        }

        /* Mid Theme 8: Rust */
        [data-theme="mid-rust"] {
            --bg-gradient-start: #d84315;
            --bg-gradient-end: #bf360c;
            --accent-color: #ff8a65;
            --text-primary: #ffffff;
            --text-secondary: #ffe0b2;
            --card-bg: #d84315;
            --nav-bg: rgba(216, 67, 21, 0.95);
            --timeline-line: rgba(255, 138, 101, 0.4);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: radial-gradient(ellipse at center, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            background-attachment: fixed;
            min-height: 100vh;
        }

        /* Sticky Navigation */
        .sticky-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%);
            z-index: 100;
            padding: 20px 0;
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-scroll-container {
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .nav-scroll-container::-webkit-scrollbar {
            display: none;
        }

        .nav-list {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            transition: transform 0.3s ease;
            padding: 10px 0;
        }

        .nav-item {
            list-style: none;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        [data-theme^="light"] .nav-link {
            color: rgba(0, 0, 0, 0.7);
        }

        .nav-link:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        [data-theme^="light"] .nav-link:hover {
            color: var(--text-primary);
            background: rgba(0, 0, 0, 0.05);
        }

        .nav-link.active {
            color: white;
            background: #1a95f8;
            border-color: rgba(255, 255, 255, 0.3);
        }

        [data-theme^="light"] .nav-link.active {
            color: white;
            background: #1a95f8;
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* Main Content */
        .main-container {
            padding-top: 100px;
        }

        .decade-section {
            padding: 40px 20px;
            position: relative;
        }

        .decade-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .decade-title {
            font-size: 4rem;
            font-weight: 800;
            color: var(--text-primary);
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: -2px;
            margin-bottom: 20px;
        }

        [data-theme^="light"] .decade-title {
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.1);
        }

        .decade-subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            font-weight: 300;
        }

        /* Timeline Container */
        .timeline-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        /* Desktop Grid Layout */
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            position: relative;
            justify-items: stretch;
        }

        /* Desktop Timeline Lines - Create lines for each row of cards */
        .timeline-line-desktop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
            pointer-events: none;
        }

        /* Create horizontal lines for each row of cards */
        .events-grid {
            position: relative;
        }

        /* Timeline line for each row */
        .timeline-row-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--timeline-line);
            z-index: 1;
        }

        /* Mobile Timeline Line */
        .timeline-line-mobile {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--timeline-line);
            z-index: 1;
            transform: translateX(-50%);
        }

        /* Ensure mobile timeline line is visible */
        @media (max-width: 768px) {
            .timeline-line-mobile {
                display: block;
            }
        }

        /* Event Items */
        .event-item {
            position: relative;
            z-index: 2;
        }

        /* Hide dots completely */
        .event-dot {
            display: none;
        }

        .event-date {
            background: #2A2A2A;
            padding: 6px 14px;
            border-radius: 15px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.85rem;
            display: inline-block;
            margin-bottom: 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 5;
        }

        .event-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            height: 375px;
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .event-card.fade-out::before {
            content: '';
            position: absolute;
            bottom: 70px;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(to bottom, 
                transparent 0%,
                var(--card-bg) 100%);
            pointer-events: none;
            z-index: 6;
        }

        /* Mobile: Adjust fade to cover all overflowed text */
        @media (max-width: 768px) {
            .event-card.fade-out::before {
                bottom: 50px;
                height: 150px;
            }
        }

        [data-theme^="light"] .event-card {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .event-card:hover {
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3);
        }

        [data-theme^="light"] .event-card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .event-title {
            color: var(--text-primary);
            font-size: 1.2em;
            font-weight: 700;
            margin-top: 50px;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .event-description {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.95rem;
            flex: 1 1 auto;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
            min-height: 0;
            z-index: 1;
        }

        .event-link {
            display: none;
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            border: 1px solid var(--accent-color);
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            align-self: flex-start;
            position: relative;
            z-index: 10;
            margin-top: auto;
            flex-shrink: 0;
        }

        .event-card.fade-out .event-link {
            display: inline-block;
        }

        .event-link:hover {
            background: var(--accent-color);
            color: white;
        }

        [data-theme^="light"] .event-link:hover {
            background: var(--accent-color);
            color: white;
        }

        /* Modal Styles */
        .event-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(45, 45, 45, 0.85);
            backdrop-filter: blur(5px);
        }

        .event-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .event-modal-content {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .event-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: var(--text-secondary);
            cursor: pointer;
            background: none;
            border: none;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .event-modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: var(--text-primary);
        }

        .event-modal-title {
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            padding-right: 40px;
            line-height: 1.3;
        }

        .event-modal-description {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .event-modal-content {
                padding: 20px;
                max-height: 90vh;
            }

            .event-modal-title {
                font-size: 1.25rem;
            }

            .event-modal-description {
                font-size: 0.95rem;
            }
        }

        /* Mobile Stack Layout */
        .events-stack {
            display: flex;
            flex-direction: column;
            gap: 40px;
            position: relative;
            align-items: center;
        }

        .events-stack .event-item {
            margin-bottom: 40px;
            width: 100%;
            max-width: 400px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sticky-nav {
                padding: 15px 0;
            }

            .nav-container {
                padding: 0 15px;
            }

            .nav-scroll-container {
                overflow-x: auto;
                overflow-y: hidden;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .nav-scroll-container::-webkit-scrollbar {
                display: none;
            }

            .nav-list {
                display: flex;
                justify-content: flex-start;
                gap: 15px;
                flex-wrap: nowrap;
                min-width: max-content;
                padding: 10px 0px;
            }

            .nav-link {
                font-size: 0.9rem;
                padding: 6px 12px;
                white-space: nowrap;
                flex-shrink: 0;
            }

            .main-container {
                padding-top: 80px;
            }

            .decade-section {
                padding: 30px 15px;
            }

            .decade-title {
                font-size: 2.5rem;
            }

            .decade-subtitle {
                font-size: 1rem;
            }

            .events-grid {
                display: none;
            }

            .events-stack {
                display: flex;
            }

            .timeline-line-desktop {
                display: none;
            }

            .timeline-line-mobile {
                display: block;
            }
        }

        @media (min-width: 769px) {
            .events-stack {
                display: none;
            }

            .events-grid {
                display: grid;
            }

            .timeline-line-desktop {
                display: block;
            }

            .timeline-line-mobile {
                display: none;
            }
        }

        /* Tablet and below: up to 1024px get 313px height */
        @media (max-width: 1024px) {
            .event-card {
                height: 313px;
            }
        }

        /* Desktop: above 1024px get 375px height */
        @media (min-width: 1025px) {
            .event-card {
                height: 375px;
            }
        }

        @media (max-width: 480px) {
            .nav-list {
                gap: 8px;
            }

            .nav-link {
                font-size: 0.8rem;
                padding: 5px 10px;
            }

            .decade-title {
                font-size: 2rem;
            }

            .event-card {
                padding: 16px;
                height: 313px;
            }

            .event-date {
                top: 16px;
                left: 16px;
            }

            .event-title {
                font-size: 1.1em;
            }

            .event-description {
                font-size: 0.9rem;
            }
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Section spacing */
        .decade-section:not(:last-child) {
            margin-bottom: 20px;
        }

        /* Ensure minimum height for better visual balance */
        .decade-section {
            min-height: 50vh;
        }

    </style>
</head>

<body>
    <!-- Sticky Navigation -->
    <nav class="sticky-nav">
        <div class="nav-container">
            <div class="nav-scroll-container">
                <ul class="nav-list">
                    <li class="nav-item"><a href="#1920s" class="nav-link" data-decade="1920s">1920s</a></li>
                    <li class="nav-item"><a href="#1930s" class="nav-link" data-decade="1930s">1930s</a></li>
                    <li class="nav-item"><a href="#1940s" class="nav-link" data-decade="1940s">1940s</a></li>
                    <li class="nav-item"><a href="#1950s" class="nav-link" data-decade="1950s">1950s</a></li>
                    <li class="nav-item"><a href="#1960s" class="nav-link" data-decade="1960s">1960s</a></li>
                    <li class="nav-item"><a href="#1970s" class="nav-link" data-decade="1970s">1970s</a></li>
                    <li class="nav-item"><a href="#1980s" class="nav-link" data-decade="1980s">1980s</a></li>
                    <li class="nav-item"><a href="#1990s" class="nav-link" data-decade="1990s">1990s</a></li>
                    <li class="nav-item"><a href="#2000s" class="nav-link" data-decade="2000s">2000s</a></li>
                    <li class="nav-item"><a href="#2010s" class="nav-link" data-decade="2010s">2010s</a></li>
                    <li class="nav-item"><a href="#2020s" class="nav-link" data-decade="2020s">2020s</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container">
        <!-- 1920s Section -->
        <section id="1920s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">1920s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 1930s Section -->
        <section id="1930s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">1930s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div>
                <div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div>
            </div>
        </section>

        <!-- 1940s Section -->
        <section id="1940s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">1940s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 1950s Section -->
        <section id="1950s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">1950s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 1960s Section -->
        <section id="1960s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">1960s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 1970s Section -->
        <section id="1970s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">1970s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 1980s Section -->
        <section id="1980s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">1980s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 1990s Section -->
        <section id="1990s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">1990s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 2000s Section -->
        <section id="2000s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">2000s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 2010s Section -->
        <section id="2010s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">2010s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

        <!-- 2020s Section -->
        <section id="2020s" class="decade-section">
            <div class="decade-header">
                <h2 class="decade-title">2020s</h2>
            </div>
            <div class="timeline-container">
                <div class="timeline-line-mobile"></div>
                
                <div class="events-grid">
                    <!-- Events will be populated from timelineData -->
                </div><div class="events-stack">
                    <!-- Events will be populated from timelineData -->
                </div></div>
            </div>
        </section>

    </div>

    <script>
        // Set theme to Black Cards with Dark Grey Background
        document.documentElement.setAttribute('data-theme', 'dark-gray-black');

        // ============================================
        // CENTRALIZED TIMELINE DATA
        // ============================================
        // 
        // HOW TO USE:
        // 1. Update card content in this timelineData object
        // 2. Changes automatically apply to both desktop (.events-grid) and mobile (.events-stack) views
        // 3. This is the ONLY source of data for the timeline - no hardcoded HTML events
        //
        // STRUCTURE:
        // Each event needs: date (string), title (string), description (string), link (string)
        //
        const timelineData = {
  "1920s": [
    {
      date: "1926",
      title: "CJRM hits the airwaves",
      description: "Located at 665 on the dial with 500 watts of power and owned by Grain merchants James Richardson and Sons Ltd. The very beginning of what would become CKRM all started in Moose Jaw on July 27, 1926. The transmitter and studios were situated in the Richardson Building in the heart of the city. CJRM had a power of 500 watts and was located at 665 kHz on the dial.",
      link: "#"
    },
    {
      date: "1928",
      title: "CJRM's frequency changes to 880 kHz",
      description: "",
      link: "#"
    },
    {
      date: "1928",
      title: "The Richardsons open CJRW",
      description: "The transmitter was in Fleming, just west of the Manitoba-Saskatchewan border. Studios were in Winnipeg. They used these stations to provide farmers and grain elevator operators in the \"Breadbasket of Canada\" with up-to-the-minute grain and market prices and a variety entertainment programs.",
      link: "#"
    }
  ],
  "1930s": [
    {
      date: "1933",
      title: "James Richardson and Sons move to obtain federal permission to operate a studio in Regina",
      description: "",
      link: "#"
    },
    {
      date: "1934",
      title: "CJRM moves to 960 and doubles the power to 1000 watts",
      description: "",
      link: "#"
    },
    {
      date: "1934",
      title: "CJRM's transmitter moves to Belle Plain with a 1,000 watt signal on a new frequency of 540 kHz",
      description: "CKRM held the coveted spot of 540 on the AM dial. With the new transmitter located halfway between Moose Jaw and Regina, it would be shared by both studios. The CPR broadcast line to Fleming was extended to Regina, and the three studios (in Winnipeg, Regina and Moose Jaw), exchanged some programs from their cities.",
      link: "#"
    },
    {
      date: "1934",
      title: "Sliding back down the dial to 540 holding steady at 1K watts",
      description: "The Moose Jaw studios were closed and the Fleming transmitter shut down, as was the inter-city broadcast line to Regina.",
      link: "#"
    }
  ],
  "1940s": [
    {
      date: "1940",
      title: "A change in ownership brings new challenges",
      description: "TransCanada Communications run by Victor Sifton and family, bought the radio division of James Richardson & Sons Ltd (CJRC Winnipeg and CJRM Regina) from the Richardson Estate",
      link: "#"
    },
    {
      date: "1940",
      title: "More movement on the dial as CJRM moves from 960 to 950 kHz",
      description: "",
      link: "#"
    },
    {
      date: "1941",
      title: "CJRM changes its frequency from 950 kHz to 980 kHz",
      description: "The change was made in accordance with the implementation of the Havana Treaty. So much change made it challenging to secure a following and identity. But loyal listeners came along for the ride. To meet growing demands for network time during the evenings, largely due to the war, the CBC set up a second network for commercial sponsorship. The network's first sponsor (on an experimental basis) was the Gillette Safety Razor Co. The Mutual Broadcasting System originated boxing events for 26 Canadian stations through the CBC, plus the MBS affiliate – CKLW Windsor. The second network had 23 Canadian stations with alternative stations in Montreal to meet local conditions there. The new network would operate only after 6:00 p.m. Eastern Time. Over the past year, private stations had been anxious to have such a network – outside of CBC control. However, under the Radio Act, the CBC had full control over all networks in the country. It was felt that a full second network with full day and night programming was not feasible or economically possible at this time. CBC-owned stations affiliated with the new network: CBK Watrous, CBA Sackville and CBY Toronto. Privately-owned stations affiliated with the new network were: CJOR Vancouver, CHWK Chilliwack, CFCN Calgary, CFRN Edmonton, CJRM Regina, CJGX Yorkton, CJRC Winnipeg, CKCA Kenora, CJIC Sault Ste Marie, CKOC Hamilton, CKTB St. Catherines, CFPL London, CFCO Chatham, CKLW Windsor, CKCR Kitchener, CKCO Ottawa, CFCF or CHLP Montreal, CHLT Sherbrooke, CKNB Campbellton, and CJLS Yarmouth.",
      link: "#"
    },
    {
      date: "1943",
      title: "CJRM becomes CKRM",
      description: "",
      link: "#"
    },
    {
      date: "1944",
      title: "New Ad slogan debuts",
      description: "\"CKRM – The Saskatchewan Farmer Station\"",
      link: "#"
    },
    {
      date: "1947",
      title: "The Saturday Night Amateur Hour hits the road and CKRM signal is strengthened to 5K watts",
      description: "The end of the war brought changes to radio programing. In 1947 the crew was on the road with The Saturday Night Amateur Hour, broadcasting from small town Saskatchewan. They traveled to towns like Stoughton, Davidson, Weyburn and Francis, raising thousands of dollars for the Associated Canadian Travelers Tuberculosis Prevention Fund.",
      link: "#"
    },
    {
      date: "1949",
      title: "New Ad slogan debuts",
      description: "\"Saskatchewan's Favourite Listening Post\"",
      link: "#"
    }
  ],
  "1950s": [
    {
      date: "1950",
      title: "New Ad slogan debuts",
      description: "\CKRM for Saskatchewan\". CKRM used \"RM the Program Man\" in its print advertising.",
      link: "#"
    },
    {
      date: "1951",
      title: "CKRM turns 25",
      description: "According to a print ad, CKRM was getting ready to mark its Silver Anniversary...from 50 watts to 5,000...from CJRM to CKRM...from 1926 to 1951...giving service to advertisers and listeners in Saskatchewan. From another ad: Since the day we commenced transmission with 50 watts, our station has grown to be a leader in Saskatchewan. Our faithful listeners and successful advertisers are invited to \"keep tuned to the Centre Aisle on Your Radio Dial…\" CKRM 980 KC Regina – 1926-1951.",
      link: "#"
    },
    {
      date: "1954",
      title: "CKRM opens new studios in June.",
      description: "At this time, the station employed 42 people. Ad slogans: Don't let your sales slip. Secure your advertising on CKRM on the hard-hitting…far reaching 980 frequency. / People Choose CKRM Radio Regina.",
      link: "#"
    },
    {
      date: "1955",
      title: "A New Ad slogan debuts",
      description: "\"The Golden Voice of Saskatchewan\". \"When you want to reach the Booming Saskatchewan Market, the most important step in any campaign is to contact CKRM Regina.\"",
      link: "#"
    },
    {
      date: "1957",
      title: "CKRM 980 is a CBC Dominion Basic affiliate",
      description: "Ownership of Western Communications Ltd.",
      link: "#"
    },
    {
      date: "1958",
      title: "Under Western Communications Ltd ownership, CKRM gets a major boost in power to 10,000 watts",
      description: "According to Elliott-Haynes, CKRM reached a total of 105,912 adult listeners every day. CKRM 980 applied for a power increase from 5,000 watts full-time (directional at night) to 10,000 watts day and 5,000 watts night (two directional patterns). The CBC Board of Governors recommended the application for deferral pending further evidence of improved local programming. After three applications, the power increase finally took place later in the year. Three 250 foot towers were used.",
      link: "#"
    }
  ],
  "1960s": [
    ,
    {
      date: "1961",
      title: "Cambrian Broadcasting Ltd. (CKSO Sudbury) becomes the new owner; 980 on the dial, 10K watts",
      description: "",
      link: "#"
    },
    {
      date: "1962",
      title: "The Dominion and Trans-Canada networks consolidate into a single CBC Radio network",
      description: "CKRM's affiliation with the network came to an end.",
      link: "#"
    }
  ],
  "1970s": [
        {
            date: "1970",
            title: "New owner alert, as Buffalo Broadcasting Ltd. (George Gallagher) takes the helm",
            description: "George Gallagher, owner of CJGX Yorkton, incorporated Buffalo Broadcasting Ltd. last year for the purpose of purchasing CKRM from Cambrian Broadcasting Ltd. CRTC approved the purchase on June 10 and Buffalo took over operation of CKRM on June 15. Gallagher was president of Buffalo Broadcasting and held the same title with Yorkton Broadcasting Co. Ltd. (CJGX). The ‘RM endured many changes in music programming, from live entertainment, to top forty, and eventually landing on country.",
            link: ""
        },
        {
            date: "1974",
            title: "On May 31, Buffalo Broadcasting is authorized to purchase CFMQ-FM from Metropolitan Broadcasting Ltd.",
            description: "CKRM now has a sister FM station.",
            link: ""
        },
        {
            date: "1976",
            title: "CKRM Celebrates its 50th anniversary",
            description: "“175,000 listeners can’t be wrong, keep up the good country!” That was a message of congratulations from Molson’s Sask Brewery LTD in honour of CKRM reaching the fifty-year milestone in 1976.  Staff members marked the occasion by producing a commemorative album titled \"Your Brand of Country” featuring the music stylings of twelve home grown artists.  The album was available through CKRM and Pinders Drug Store – now a classic collector’s item. Regina Mayor Terry Van Elson proclaims March 26, 1976, CKRM day in the Queen City. ",
            link: ""
        }
    ],
    "1980s": [
        {
            date: "1981",
            title: "Harvard Developments Ltd purchases CKRM and it’s sister FM station from Buffalo Broadcasting",
            description: "980 frequency, 10K watts of power.",
            link: ""
        },
        {
            date: "1982",
            title: "On March 1st Harvard Developments Ltd. (controlled by the Hill family of Regina) buys CKRM-AM and CFMQ-FM from Buffalo Broadcasting",
            description: "Harvard owned CKCK-TV at this time. They acquired the TV station in 1977 from Armadale Communications.",
            link: ""
        }
    ],
    "1990s": [
        {
            date: "1990",
            title: "CKRM’s license renewed for only two years",
            description: "The short renewal was due to CRTC concerns over the placement of Canadian content.",
            link: ""
        },
        {
            date: "1995",
            title: "CKRM kicks off the first Country Cookout",
            description: "The Cookout celebrates the hardworking producers across Saskatchewan by bringing a meal and entertainment right to the farm.",
            link: ""
        }
    ],
    "2000s": [
        {
            date: "2001",
            title: "Harvard Broadcasting takes ownership of CKRM",
            description: "On November 30, the CRTC approved an application whereby Harvard was able to purchase the assets of CKCK and CKWF-FM. and for CKRM to occupy CKCK’s 620 frequency using the CKCK transmitter. In CKWF-FM, Harvard also acquired its second FM station in the Regina market, ending up with one AM station and two FM stations. CKRM’s transmitter on 980 kHz was acquired by RAWLCO Communications which surrendered its AM license for CJME on 1300 kHz. CKCK 620 left the air at midnight, October 1. CKCK was replaced on the 620 frequency by CKRM. ",
            link: ""
        },
        {
            date: "2003",
            title: "On February 20, the CRTC authorizes Harvard Broadcasting to operate a network originating from CKRM",
            description: "The new network would broadcast regional and provincial news and information of interest to residents of Saskatchewan including open-line shows. It proposed to broadcast a maximum of 15 to 20 programs a year from one to four hours in duration. The network license would be in effect until August 31, 2009",
            link: ""
        },
        {
            date: "2006",
            title: "CKRM and its sister FM station are on the move",
            description: "The move was from Halifax street to the current home in the heart of downtown Regina on Rose Street.",
            link: ""
        }
    ],
    "2010s": [
        {
            date: "2010",
            title: "CKRM changes its format",
            description: "CKRM shifts from Country to a mix of Country music and sports. On June 30, the CRTC renewed the broadcasting license for the English-language commercial radio station CKRM Regina from 1 July 2010 to 31 August 2013.",
            link: ""
        }
    ]

};

        // Function to generate HTML for a single event card
        function generateEventHTML(event) {
            return `
                    <div class="event-item">
                        <div class="event-card">
                            <div class="event-date">${escapeHtml(event.date)}</div>
                            <h3 class="event-title">${escapeHtml(event.title)}</h3>
                            <p class="event-description">${escapeHtml(event.description)}</p>
                            <a href="${escapeHtml(event.link)}" class="event-link" onclick="return false;">Read More →</a>
                        </div>
                    </div>`;
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Function to render timeline events from data
        function renderTimelineEvents() {
            // Only use timelineData - no extraction or merging
            Object.keys(timelineData).forEach(decade => {
                const section = document.getElementById(decade);
                if (!section) return;

                const events = timelineData[decade];
                if (!events || events.length === 0) return;
                
                const eventsHTML = events.map(generateEventHTML).join('\n');

                // Find both desktop and mobile containers
                const eventsGrid = section.querySelector('.events-grid');
                const eventsStack = section.querySelector('.events-stack');

                if (eventsGrid) {
                    eventsGrid.innerHTML = eventsHTML;
                }
                if (eventsStack) {
                    eventsStack.innerHTML = eventsHTML;
                }
            });

            // Re-initialize functionality after rendering
            setTimeout(() => {
                applyFadeEffect();
                setupEventLinks();
                createTimelineLines(); // Create timeline lines after content is rendered
            }, 50);
        }

        // Navigation functionality
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.decade-section');
        let isUserScrollingNav = false;
        let isProgrammaticScroll = false;
        let targetSectionId = null;
        let lastScrollY = window.scrollY;

        // Update active navigation based on scroll position
        function updateActiveNav() {
            // Skip updates during programmatic scrolling
            if (isProgrammaticScroll) {
                return; // Always skip during programmatic scroll
            }

            let current = '';
            const navHeight = 100; // Height of sticky navigation
            const offset = navHeight + 50; // Additional buffer for better UX
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= (sectionTop - offset)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-decade') === current) {
                    link.classList.add('active');
                }
            });

            // Center active nav item on mobile (only if user isn't manually scrolling)
            if (window.innerWidth <= 768 && current && !isUserScrollingNav) {
                // Use requestAnimationFrame for smooth centering
                requestAnimationFrame(() => {
                    centerActiveNavItem(current);
                });
            }
        }

        // Center the active navigation item in the scroll container
        function centerActiveNavItem(activeDecade) {
            const navScrollContainer = document.querySelector('.nav-scroll-container');
            const activeLink = document.querySelector(`[data-decade="${activeDecade}"]`);
            
            if (navScrollContainer && activeLink) {
                const containerRect = navScrollContainer.getBoundingClientRect();
                const linkRect = activeLink.getBoundingClientRect();
                const containerCenter = containerRect.width / 2;
                const linkCenter = linkRect.left - containerRect.left + (linkRect.width / 2);
                const scrollOffset = linkCenter - containerCenter;
                
                // Only scroll if the link is not already centered (within 50px tolerance)
                if (Math.abs(scrollOffset) > 50) {
                    navScrollContainer.scrollTo({
                        left: navScrollContainer.scrollLeft + scrollOffset,
                        behavior: 'smooth'
                    });
                }
            }
        }

        // Function to detect when smooth scroll animation is complete
        function detectScrollEnd() {
            let scrollEndTimeout;
            const checkScrollEnd = () => {
                const currentScrollY = window.scrollY;
                
                // If scroll position hasn't changed, we've reached the end
                if (Math.abs(currentScrollY - lastScrollY) < 1) {
                    clearTimeout(scrollEndTimeout);
                    
                    // Center the active nav item on mobile after scroll completes
                    if (window.innerWidth <= 768 && targetSectionId) {
                        centerActiveNavItem(targetSectionId);
                    }
                    
                    isProgrammaticScroll = false;
                    targetSectionId = null;
                } else {
                    lastScrollY = currentScrollY;
                    scrollEndTimeout = setTimeout(checkScrollEnd, 50);
                }
            };
            
            // Start checking after a short delay to allow animation to begin
            setTimeout(checkScrollEnd, 100);
        }

        // Smooth scroll to section
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('data-decade');
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    // Set flags to prevent nav updates during programmatic scroll
                    isProgrammaticScroll = true;
                    targetSectionId = targetId;
                    
                    // Calculate offset to account for sticky navigation
                    const navHeight = 100; // Height of sticky navigation
                    const targetPosition = targetSection.offsetTop - navHeight;
                    
                    // Set the correct active nav item immediately
                    navLinks.forEach(navLink => {
                        navLink.classList.remove('active');
                    });
                    link.classList.add('active');
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                    
                    // Detect when scroll animation is complete
                    detectScrollEnd();
                }
            });
        });

        // Throttle function for performance optimization
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }

        // Throttled version of updateActiveNav for performance
        const throttledUpdateActiveNav = throttle(updateActiveNav, 16); // ~60fps

        // Listen for scroll events with real-time updates
        window.addEventListener('scroll', throttledUpdateActiveNav);
        
        // Handle manual navigation scrolling with more intelligent detection
        const navScrollContainer = document.querySelector('.nav-scroll-container');
        if (navScrollContainer) {
            let navScrollTimeout;
            navScrollContainer.addEventListener('scroll', () => {
                isUserScrollingNav = true;
                // Clear existing timeout
                clearTimeout(navScrollTimeout);
                // Reset the flag after user stops scrolling
                navScrollTimeout = setTimeout(() => {
                    isUserScrollingNav = false;
                }, 500); // Reduced timeout for more responsive behavior
            });
        }
        
        // Initial call
        updateActiveNav();

        // Function to create timeline lines for desktop grid
        function createTimelineLines() {
            const eventGrids = document.querySelectorAll('.events-grid');
            
            eventGrids.forEach(grid => {
                // Remove existing timeline lines
                const existingLines = grid.querySelectorAll('.timeline-row-line');
                existingLines.forEach(line => line.remove());
                
                // Handle mobile vs desktop differently
                if (window.innerWidth > 768) {
                    // Desktop: Create horizontal lines for each row
                    const cards = grid.querySelectorAll('.event-item');
                    if (cards.length === 0) return;
                    
                    // Group cards by their vertical position (row)
                    const rows = new Map();
                    
                    cards.forEach(card => {
                        const rect = card.getBoundingClientRect();
                        const gridRect = grid.getBoundingClientRect();
                        const relativeTop = rect.top - gridRect.top;
                        
                        // Round to nearest 50px to group cards in the same row
                        const rowKey = Math.round(relativeTop / 50) * 50;
                        
                        if (!rows.has(rowKey)) {
                            rows.set(rowKey, []);
                        }
                        rows.get(rowKey).push(card);
                    });
                    
                    // Create a timeline line for each row
                    rows.forEach((cardsInRow, rowTop) => {
                        if (cardsInRow.length > 1) { // Only create lines for rows with multiple cards
                            const line = document.createElement('div');
                            line.className = 'timeline-row-line';
                            
                            // Get the first and last cards in the row
                            const firstCard = cardsInRow[0];
                            const lastCard = cardsInRow[cardsInRow.length - 1];
                            const gridRect = grid.getBoundingClientRect();
                            const firstCardRect = firstCard.getBoundingClientRect();
                            const lastCardRect = lastCard.getBoundingClientRect();
                            
                            // Calculate the vertical center of the card relative to the grid
                            const cardCenterY = (firstCardRect.top + firstCardRect.bottom) / 2 - gridRect.top;
                            
                            // Calculate left position (left edge of first card relative to grid)
                            const lineLeft = firstCardRect.left - gridRect.left;
                            
                            // Calculate right position (distance from right edge of last card to right edge of grid)
                            const lineRight = gridRect.right - lastCardRect.right;
                            
                            // Position line at the center, accounting for line height (2px)
                            const lineTop = cardCenterY - 1; // Subtract half of line height (2px / 2 = 1px)
                            
                            line.style.top = lineTop + 'px';
                            line.style.left = lineLeft + 'px';
                            line.style.right = lineRight + 'px';
                            
                            grid.appendChild(line);
                        }
                    });
                } else {
                    // Mobile: Position vertical timeline line between first and last event cards
                    const timelineContainer = grid.parentElement;
                    const mobileLine = timelineContainer.querySelector('.timeline-line-mobile');
                    const eventsStack = timelineContainer.querySelector('.events-stack');
                    
                    if (mobileLine && eventsStack) {
                        const stackCards = eventsStack.querySelectorAll('.event-item');
                        if (stackCards.length > 0) {
                            // Use a timeout to ensure DOM is ready
                            setTimeout(() => {
                                const firstCard = stackCards[0];
                                const lastCard = stackCards[stackCards.length - 1];
                                
                                const firstRect = firstCard.getBoundingClientRect();
                                const lastRect = lastCard.getBoundingClientRect();
                                const containerRect = timelineContainer.getBoundingClientRect();
                                
                                // Calculate the top position (center of first card)
                                const firstCardCenter = (firstRect.top + firstRect.bottom) / 2 - containerRect.top;
                                
                                // Calculate the bottom position (center of last card)
                                const lastCardCenter = (lastRect.top + lastRect.bottom) / 2 - containerRect.top;
                                
                                // Set the line position and height
                                mobileLine.style.top = firstCardCenter + 'px';
                                mobileLine.style.height = (lastCardCenter - firstCardCenter) + 'px';
                                mobileLine.style.display = 'block';
                            }, 100);
                        }
                    }
                }
            });
        }

        // Create timeline lines on load and resize
        createTimelineLines();
        window.addEventListener('resize', createTimelineLines);
        
        // Also create timeline lines when DOM is fully loaded
        document.addEventListener('DOMContentLoaded', createTimelineLines);

        // Fade effect functionality - fades when content overflows card height
        function applyFadeEffect() {
            const eventCards = document.querySelectorAll('.event-card');
            
            eventCards.forEach(card => {
                // Remove existing fade class
                card.classList.remove('fade-out');
                
                // Get all content elements
                const date = card.querySelector('.event-date');
                const title = card.querySelector('.event-title');
                const description = card.querySelector('.event-description');
                const link = card.querySelector('.event-link');
                
                if (!title || !description || !link) return;
                
                // Check if there's a real link (not "#")
                const href = link.getAttribute('href');
                const hasRealLink = href && href !== '#' && href !== '' && !href.startsWith('#');
                
                // Get the actual computed card height and padding BEFORE modifying styles
                const computedStyle = getComputedStyle(card);
                const cardHeight = parseFloat(computedStyle.height);
                const cardPaddingTop = parseFloat(computedStyle.paddingTop) || 0;
                const cardPaddingBottom = parseFloat(computedStyle.paddingBottom) || 0;
                const cardPadding = cardPaddingTop + cardPaddingBottom;
                
                // Temporarily change overflow to measure actual content height
                const originalOverflow = card.style.overflow;
                const originalHeight = card.style.height;
                card.style.overflow = 'visible';
                card.style.height = 'auto';
                
                // Measure total content height
                // Include date button if it exists (it's absolutely positioned but takes up space)
                const dateHeight = date ? date.offsetHeight : 0;
                const dateMarginBottom = date ? (parseInt(getComputedStyle(date).marginBottom) || 0) : 0;
                const titleHeight = title.offsetHeight;
                const titleMarginTop = parseInt(getComputedStyle(title).marginTop) || 0;
                const titleMarginBottom = parseInt(getComputedStyle(title).marginBottom) || 0;
                const descHeight = description.offsetHeight;
                const descMarginBottom = parseInt(getComputedStyle(description).marginBottom) || 0;
                const linkHeight = link.offsetHeight;
                const linkMarginTop = parseInt(getComputedStyle(link).marginTop) || 0;
                
                // Calculate total content height including all margins
                const totalContentHeight = dateHeight + dateMarginBottom +
                                         titleMarginTop + titleHeight + titleMarginBottom + 
                                         descHeight + descMarginBottom + 
                                         linkMarginTop + linkHeight;
                
                // Restore original styles
                card.style.overflow = originalOverflow || 'hidden';
                card.style.height = originalHeight || '';
                
                const availableHeight = cardHeight - cardPadding;
                
                // Check if content overflows
                const contentOverflows = totalContentHeight > availableHeight;
                
                // Show button and apply fade if:
                // 1. Content overflows, OR
                // 2. There's a real link set
                if (contentOverflows || hasRealLink) {
                    // Only apply fade if content overflows
                    if (contentOverflows) {
                        card.classList.add('fade-out');
                    }
                    link.style.display = 'inline-block';
                } else {
                    card.classList.remove('fade-out');
                    link.style.display = 'none';
                }
            });
        }

        // Modal functionality
        function initModal() {
            const modal = document.getElementById('event-modal');
            if (!modal) return;
            
            // Close modal on close button click
            const closeBtn = modal.querySelector('.event-modal-close');
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    closeModal();
                });
            }
            
            // Close modal on background click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Close modal on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    closeModal();
                }
            });
        }

        function openModal(title, description) {
            const modal = document.getElementById('event-modal');
            if (!modal) {
                console.error('Modal element not found');
                return;
            }
            
            const modalTitle = modal.querySelector('.event-modal-title');
            const modalDescription = modal.querySelector('.event-modal-description');
            
            if (modalTitle) modalTitle.textContent = title || '';
            if (modalDescription) modalDescription.textContent = description || '';
            
            // Remove inline display:none if present
            modal.style.display = '';
            modal.classList.add('active');
            
            // Prevent body scroll when modal is open
            document.body.style.overflow = 'hidden';
            document.documentElement.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('event-modal');
            if (modal) {
                modal.classList.remove('active');
                // Use setTimeout to ensure animation completes
                setTimeout(() => {
                    if (!modal.classList.contains('active')) {
                        modal.style.display = 'none';
                    }
                }, 300);
                document.body.style.overflow = '';
                document.documentElement.style.overflow = '';
            }
        }

        // Handle event link clicks
        function setupEventLinks() {
            const eventLinks = document.querySelectorAll('.event-link');
            
            eventLinks.forEach(link => {
                // Remove existing onclick handlers and attributes
                link.onclick = null;
                link.removeAttribute('onclick');
                
                // Remove any existing event listeners by cloning
                const newLink = link.cloneNode(true);
                link.parentNode.replaceChild(newLink, link);
                
                newLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    const href = newLink.getAttribute('href');
                    
                    // If there's a real link (not "#"), go to it
                    if (href && href !== '#' && href !== '' && !href.startsWith('#')) {
                        // Add protocol if missing
                        let url = href;
                        if (!url.startsWith('http://') && !url.startsWith('https://')) {
                            url = 'https://' + url;
                        }
                        // Open real URL in new window
                        window.open(url, '_blank', 'noopener,noreferrer');
                    } else {
                        // Only open modal if link is "#" (no real link)
                        const card = newLink.closest('.event-card');
                        if (card) {
                            const title = card.querySelector('.event-title')?.textContent.trim() || '';
                            const description = card.querySelector('.event-description')?.textContent.trim() || '';
                            if (title || description) {
                                openModal(title, description);
                            }
                        }
                    }
                });
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Render timeline events from centralized data
            renderTimelineEvents();
            
            initModal();
            applyFadeEffect();
            setupEventLinks();
        });

        // Re-apply fade effect after timeline lines are created (in case of dynamic content)
        setTimeout(() => {
            renderTimelineEvents(); // This will also call createTimelineLines internally
        }, 100);

        // Re-apply fade effect on window resize (to handle mobile/desktop switch)
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                applyFadeEffect();
                createTimelineLines(); // Recreate timeline lines on resize
            }, 150);
        });
i    </script>

    <!-- Event Modal -->
    <div id="event-modal" class="event-modal">
        <div class="event-modal-content">
            <button class="event-modal-close" aria-label="Close">&times;</button>
            <h2 class="event-modal-title"></h2>
            <p class="event-modal-description"></p>
        </div>
    </div>
</body>

</html>
